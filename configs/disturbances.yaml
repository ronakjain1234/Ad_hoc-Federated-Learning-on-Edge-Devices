network:
  topology: erdos_renyi
  n_devices: 100
  er_probability: 0.1
  ensure_connected: true
  # Link attribute ranges used when building the graph
  latency_ms: [5.0, 50.0]
  bandwidth_mbps: [5.0, 25.0]

battery:
  initial_energy: 100.0
  send_cost_per_mb: 0.02
  recv_cost_per_mb: 0.01
  idle_cost_per_round: 0.005
  recharge_rate: 0.25
  min_energy_threshold: 1.0

training:
  rounds: 10            # quick run
  clients_per_round: 15 # modest client count for speed
  local_epochs: 1
  batch_size: 64
  lr: 0.01
  seed: 42
  device: cuda   # or "cpu"

dataset:
  source: emnist       # triggers torchvision EMNIST fallback in orchestrator
  # leaf_root not needed for EMNIST

run:
  out_dir: runs
  run_name: er_emnist_quick
  notes: "ER + EMNIST quick run with disturbances layer enabled"
  export_network: true   # set false to skip graph PNG/layout on big graphs

disturbances:
  enabled: true                 # set to false for pure baseline
  apply_before_sampling: true

  # Availability & topology shocks
  device_dropout_prob: 0.05
  link_dropout_prob: 0.02

  # Performance degradation
  throttle_bandwidth_factor: [0.6, 1.0]
  latency_jitter_ms: 5.0

  # Delivery failure modes
  packet_loss_prob: 0.01
  round_comm_budget_s: 3.0     # straggler timeout (seconds)
  battery_floor: 0.05

  # Gateway routing (null => auto-pick top-degree nodes)
  gateways: null
  max_gateway_count: 3

  # Redraw disturbances each round (stateless)
  reset_each_round: true
