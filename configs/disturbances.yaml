network:
  topology: barabasi
  n_devices: 100
  er_probability: 0.1
  ensure_connected: true
  # Link attribute ranges used when building the graph
  latency_ms: [5.0, 50.0]
  bandwidth_mbps: [5.0, 25.0]
  graph_path: runs/1764582806_m3_naive_test_13/network/adjacency.csv  # runs/<timestamp>_baseline/adjacency.csv

battery:
  initial_energy: 100.0
  send_cost_per_mb: 0.02
  recv_cost_per_mb: 0.01
  idle_cost_per_round: 0.005
  recharge_rate: 0.25
  min_energy_threshold: 1.0

training:
  rounds: 30            # quick run
  clients_per_round: 20 # modest client count for speed
  local_epochs: 1
  batch_size: 64
  lr: 0.01
  seed: 77
  device: cuda   # or "cpu"

dataset:
  source: emnist       # triggers torchvision EMNIST fallback in orchestrator
  # leaf_root not needed for EMNIST
  non_iid: True       # set to false for IID data distribution across clients
  dirichlet_alpha: 0.1  # concentration parameter for Dirichlet non-IID splits

run:
  out_dir: runs
  run_name: m3_normal_er_seed_test_15
  notes: "ER + EMNIST quick run with disturbances layer enabled"
  export_network: true   # set false to skip graph PNG/layout on big graphs

disturbances:
  enabled: false                 # set to false for pure baseline
  apply_before_sampling: true

  # Availability & topology shocks
  device_dropout_prob: 0.37     # Increased from 0.05: more devices offline per round
  link_dropout_prob: 0.27      # Increased from 0.02: more network partitions

  # Performance degradation
  throttle_bandwidth_factor: [0.4, 0.8]  # Reduced from [0.6, 1.0]: severe bandwidth degradation
  latency_jitter_ms: 20.0       # Increased from 5.0: high latency variability

  # Delivery failure modes
  packet_loss_prob: 0.2        # Increased from 0.01: more lost updates
  round_comm_budget_s: 10.0      # Reduced from 3.0: stricter timeout causing more stragglers
  battery_floor: 0.10           # Increased from 0.05: devices stop earlier due to low battery

  # Gateway routing (null => auto-pick top-degree nodes)
  gateways: null
  max_gateway_count: 3

  routing_mode: "naive"

  # Redraw disturbances each round (stateless)
  reset_each_round: true